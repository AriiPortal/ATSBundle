{# src/Arii/JIDBundle/Resources/views/Default/history.html.twig #}
{% extends "AriiATSBundle::layout.html.twig" %}
{% block body %}
<script type="text/javascript">
dhtmlxEvent(window,"load",function() { 
    globalLayout = new dhtmlXLayoutObject(document.body,"2U");  
    globalLayout.cells("a").hideHeader();
    globalLayout.cells("a").setWidth(410);
    globalLayout.cells("b").hideHeader();
    
    globalMenu = globalLayout.cells("a").attachMenu();
    globalMenu.setIconsPath( "{{ asset('/bundles/ariicore/images/menu/') }}" );
    globalMenu.loadStruct("{{ url('xml_menu') }}?route={{ app.request.attributes.get('_route') }}");

    myRibbon = globalLayout.cells("a").attachRibbon(); 
    myRibbon.setIconPath( "{{ asset('bundles/ariicore/images/ribbon/') }}" );
    myRibbon.loadStruct("{{ url('json_ATS_ribbon') }}");
    myRibbon.attachEvent("onStateChange", StateRibbon );
    myRibbon.attachEvent("onClick", ClickRibbon );
    myRibbon.attachEvent("onStateChange", StateRibbon );
    myRibbon.attachEvent("onClick", ClickRibbon );
    
    var myTab = globalLayout.cells("b").attachTabbar();
    myTab.addTab("jil","JIL","100px", null, true);
    myTab.addTab("diff","{{ "Diff." | trans }}","100px");

    myTree = globalLayout.cells("a").attachTree();
    myTree.setImagesPath("{{ asset('bundles/ariicore/images/tree/') }}");
    myTree.load( "{{ url('xml_ATS_templates_tree') }}" );

    myTree.attachEvent("onClick",function(id){
        myTab.cells("jil").attachURL("{{ url('arii_ATS_template') }}?template="+id);
        myTab.cells("diff").attachURL("{{ url('arii_ATS_template_diff') }}?template="+id);
    })    
    
    globalLayout.cells("a").hideHeader();
    myTab.cells("jil").attachURL('{{ asset('/bundles/ariicore/images/arii.jpg') }}'); 
});

</script>
{% endblock %}
